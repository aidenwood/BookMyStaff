import{j as e}from"./jsx-runtime.22wztk-c.js";import{r as l}from"./index.BP8_t0zE.js";import{u as F}from"./authStore.Dbu4Kn0n.js";import{c as v,a as L,B as r}from"./button.DXrZvOnt.js";import{U as q}from"./users.DFs2PKR-.js";import{A as O,a as I,M as $}from"./alert.dxoGk0Eb.js";import{U as D}from"./user.B0bysQlT.js";import"./supabase.DFx33wYR.js";const B=v("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]),A=v("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]),z=v("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),P=v("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),b=l.forwardRef(({className:h,type:m,...s},f)=>e.jsx("input",{type:m,className:L("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",h),ref:f,...s}));b.displayName="Input";function R({onToggleMode:h,redirectTo:m}){const[s,f]=l.useState(""),[u,y]=l.useState(""),[t,j]=l.useState(null),[p,x]=l.useState(!1),[g,n]=l.useState(""),[N,w]=l.useState(!1),{login:d,loginWithOAuth:k,resetPassword:C,isLoading:o,error:a,clearError:i}=F(),S=async c=>{c.preventDefault(),i(),await d({email:s,password:u})&&m&&(window.location.href=m)},M=async c=>{i(),await k(c)},E=async c=>{c.preventDefault(),await C(g)&&w(!0)};return p?e.jsx("div",{className:"w-full max-w-md mx-auto",children:e.jsx("div",{className:"card",children:e.jsxs("div",{className:"card-body p-8",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Reset Password"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Enter your email address and we'll send you a link to reset your password"})]}),N?e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx("svg",{className:"w-8 h-8 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Check your email"}),e.jsxs("p",{className:"text-gray-600 mb-6",children:["We've sent a password reset link to ",g]}),e.jsx(r,{onClick:()=>x(!1),variant:"outline",className:"w-full",children:"Back to Login"})]}):e.jsxs("form",{onSubmit:E,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Email Address"}),e.jsx(b,{type:"email",value:g,onChange:c=>n(c.target.value),placeholder:"your.email@example.com",required:!0})]}),e.jsx(r,{type:"submit",className:"w-full",disabled:o,children:o?"Sending...":"Send Reset Link"}),e.jsx(r,{type:"button",variant:"outline",onClick:()=>x(!1),className:"w-full",children:"Back to Login"})]})]})})}):e.jsx("div",{className:"w-full max-w-md mx-auto",children:e.jsx("div",{className:"card",children:e.jsxs("div",{className:"card-body p-8",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Welcome Back"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Sign in to your account"})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 mb-4 text-center",children:"Choose your account type"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs(r,{variant:t==="business"?"default":"outline",onClick:()=>j("business"),className:"h-16 flex-col gap-2",children:[e.jsx(B,{className:"h-5 w-5"}),e.jsx("span",{className:"text-sm",children:"Business Owner"})]}),e.jsxs(r,{variant:t==="staff"?"default":"outline",onClick:()=>j("staff"),className:"h-16 flex-col gap-2",children:[e.jsx(q,{className:"h-5 w-5"}),e.jsx("span",{className:"text-sm",children:"Staff Member"})]})]})]}),e.jsxs("div",{className:"space-y-3 mb-6",children:[e.jsxs(r,{onClick:()=>M("google"),variant:"outline",className:"w-full flex items-center justify-center gap-3 h-11",disabled:o||!t,children:[e.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[e.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),e.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),e.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),e.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Continue with Google ",t&&`as ${t==="business"?"Business":"Staff"}`]}),e.jsxs(r,{onClick:()=>M("facebook"),variant:"outline",className:"w-full flex items-center justify-center gap-3 h-11",disabled:o||!t,children:[e.jsx("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:e.jsx("path",{fill:"#1877F2",d:"M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"})}),"Continue with Facebook ",t&&`as ${t==="business"?"Business":"Staff"}`]}),e.jsxs(r,{onClick:()=>M("microsoft"),variant:"outline",className:"w-full flex items-center justify-center gap-3 h-11",disabled:o||!t,children:[e.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 23 23",children:[e.jsx("path",{fill:"#f25022",d:"M1 1h10v10H1z"}),e.jsx("path",{fill:"#00a4ef",d:"M12 1h10v10H12z"}),e.jsx("path",{fill:"#7fba00",d:"M1 12h10v10H1z"}),e.jsx("path",{fill:"#ffb900",d:"M12 12h10v10H12z"})]}),"Continue with Microsoft ",t&&`as ${t==="business"?"Business":"Staff"}`]})]}),e.jsxs("div",{className:"relative mb-6",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("div",{className:"w-full border-t border-gray-200"})}),e.jsx("div",{className:"relative flex justify-center text-sm",children:e.jsx("span",{className:"px-4 bg-white text-gray-600 font-medium",children:"Or continue with email"})})]}),e.jsxs("form",{onSubmit:S,className:"space-y-4",children:[a&&e.jsx("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg",children:e.jsx("p",{className:"text-sm text-red-600",children:a})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Email Address"}),e.jsx(b,{type:"email",value:s,onChange:c=>f(c.target.value),placeholder:"your.email@example.com",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Password"}),e.jsx(b,{type:"password",value:u,onChange:c=>y(c.target.value),placeholder:"••••••••",required:!0})]}),e.jsx("div",{className:"flex items-center justify-between",children:e.jsx(r,{type:"button",variant:"ghost",onClick:()=>x(!0),className:"text-sm text-primary-600 hover:text-primary-500 h-auto p-0",children:"Forgot your password?"})}),e.jsx(r,{type:"submit",className:"w-full",disabled:o||!t,children:o?"Signing in...":`Sign In ${t?`as ${t==="business"?"Business":"Staff"}`:""}`})]}),e.jsx("div",{className:"mt-6 text-center",children:e.jsxs("p",{className:"text-sm text-gray-600",children:["Don't have an account?"," ",e.jsx("button",{onClick:h,className:"text-primary-600 hover:text-primary-500 font-medium",children:"Sign up"})]})})]})})})}function U({onToggleMode:h,redirectTo:m="/"}){const[s,f]=l.useState({firstName:"",lastName:"",email:"",password:"",confirmPassword:"",businessName:"",phone:"",role:"business_owner"}),[u,y]=l.useState(!1),[t,j]=l.useState(!1),[p,x]=l.useState(!1),[g,n]=l.useState(null),{signup:N,loginWithOAuth:w}=F(),d=(a,i)=>{f(S=>({...S,[a]:i})),n(null)},k=()=>s.password!==s.confirmPassword?(n("Passwords don't match"),!1):s.password.length<6?(n("Password must be at least 6 characters"),!1):!0,C=async a=>{if(a.preventDefault(),!!k()){x(!0),n(null);try{const{error:i}=await N({email:s.email,password:s.password,firstName:s.firstName,lastName:s.lastName,businessName:s.businessName,phone:s.phone,role:s.role});i?n(i.message):window.location.href=m}catch{n("An unexpected error occurred. Please try again.")}finally{x(!1)}}},o=async a=>{x(!0),n(null);try{const{error:i}=await w(a);i&&n(i.message)}catch{n("Failed to connect with OAuth provider.")}finally{x(!1)}};return e.jsxs("div",{className:"w-full max-w-md mx-auto",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Get Started"}),e.jsx("p",{className:"text-gray-600",children:"Create your BookMyStaff account"})]}),e.jsxs("div",{className:"space-y-3 mb-6",children:[e.jsxs(r,{variant:"outline",className:"w-full h-12 text-left justify-start",onClick:()=>o("google"),disabled:p,children:[e.jsxs("svg",{className:"w-5 h-5 mr-3",viewBox:"0 0 24 24",children:[e.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),e.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),e.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),e.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Continue with Google"]}),e.jsxs(r,{variant:"outline",className:"w-full h-12 text-left justify-start",onClick:()=>o("github"),disabled:p,children:[e.jsx("svg",{className:"w-5 h-5 mr-3",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"})}),"Continue with GitHub"]}),e.jsxs(r,{variant:"outline",className:"w-full h-12 text-left justify-start",onClick:()=>o("microsoft"),disabled:p,children:[e.jsxs("svg",{className:"w-5 h-5 mr-3",viewBox:"0 0 24 24",children:[e.jsx("path",{fill:"#F25022",d:"M1 1h10v10H1z"}),e.jsx("path",{fill:"#00A4EF",d:"M13 1h10v10H13z"}),e.jsx("path",{fill:"#7FBA00",d:"M1 13h10v10H1z"}),e.jsx("path",{fill:"#FFB900",d:"M13 13h10v10H13z"})]}),"Continue with Microsoft"]})]}),e.jsxs("div",{className:"relative mb-6",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("div",{className:"w-full border-t border-gray-300"})}),e.jsx("div",{className:"relative flex justify-center text-sm",children:e.jsx("span",{className:"px-2 bg-white text-gray-500",children:"Or sign up with email"})})]}),g&&e.jsx(O,{variant:"destructive",className:"mb-6",children:e.jsx(I,{children:g})}),e.jsxs("form",{onSubmit:C,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"I want to:"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("button",{type:"button",onClick:()=>d("role","business_owner"),className:`p-3 border rounded-lg text-sm font-medium transition-colors ${s.role==="business_owner"?"border-primary-500 bg-primary-50 text-primary-700":"border-gray-300 hover:border-gray-400"}`,children:[e.jsx(B,{className:"h-5 w-5 mx-auto mb-1"}),"Setup a business"]}),e.jsxs("button",{type:"button",onClick:()=>d("role","staff"),className:`p-3 border rounded-lg text-sm font-medium transition-colors ${s.role==="staff"?"border-primary-500 bg-primary-50 text-primary-700":"border-gray-300 hover:border-gray-400"}`,children:[e.jsx(D,{className:"h-5 w-5 mx-auto mb-1"}),"Join as staff"]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"First Name"}),e.jsx("input",{type:"text",value:s.firstName,onChange:a=>d("firstName",a.target.value),className:"w-full px-3 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-colors",placeholder:"John",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Last Name"}),e.jsx("input",{type:"text",value:s.lastName,onChange:a=>d("lastName",a.target.value),className:"w-full px-3 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-colors",placeholder:"Smith",required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address"}),e.jsxs("div",{className:"relative",children:[e.jsx($,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),e.jsx("input",{type:"email",value:s.email,onChange:a=>d("email",a.target.value),className:"w-full pl-10 pr-3 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-colors",placeholder:"john@example.com",required:!0})]})]}),s.role==="business_owner"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Business Name"}),e.jsxs("div",{className:"relative",children:[e.jsx(B,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),e.jsx("input",{type:"text",value:s.businessName,onChange:a=>d("businessName",a.target.value),className:"w-full pl-10 pr-3 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-colors",placeholder:"Your business name",required:s.role==="business_owner"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(P,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),e.jsx("input",{type:u?"text":"password",value:s.password,onChange:a=>d("password",a.target.value),className:"w-full pl-10 pr-10 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-colors",placeholder:"Create a password",required:!0}),e.jsx("button",{type:"button",onClick:()=>y(!u),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:u?e.jsx(A,{className:"h-4 w-4"}):e.jsx(z,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Confirm Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(P,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),e.jsx("input",{type:t?"text":"password",value:s.confirmPassword,onChange:a=>d("confirmPassword",a.target.value),className:"w-full pl-10 pr-10 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-colors",placeholder:"Confirm your password",required:!0}),e.jsx("button",{type:"button",onClick:()=>j(!t),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:t?e.jsx(A,{className:"h-4 w-4"}):e.jsx(z,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"flex items-start",children:[e.jsx("input",{type:"checkbox",className:"mt-1 rounded border-gray-300 text-primary-600 focus:ring-primary-500",required:!0}),e.jsxs("label",{className:"ml-2 text-sm text-gray-600",children:["I agree to the"," ",e.jsx("a",{href:"#",className:"text-primary-600 hover:text-primary-500 font-medium",children:"Terms of Service"})," ","and"," ",e.jsx("a",{href:"#",className:"text-primary-600 hover:text-primary-500 font-medium",children:"Privacy Policy"})]})]}),e.jsx(r,{type:"submit",className:"w-full h-12",disabled:p,children:p?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Creating account..."]}):"Create Account"})]}),e.jsx("div",{className:"text-center mt-6",children:e.jsxs("p",{className:"text-gray-600",children:["Already have an account?"," ",e.jsx("button",{onClick:h,className:"text-primary-600 hover:text-primary-500 font-medium",children:"Sign in"})]})})]})}function K({initialMode:h="login",redirectTo:m="/"}){const[s,f]=l.useState(h),u=()=>{f(y=>y==="login"?"signup":"login")};return e.jsx("div",{className:"w-full",children:s==="login"?e.jsx(R,{onToggleMode:u,redirectTo:m}):e.jsx(U,{onToggleMode:u,redirectTo:m})})}export{K as default};
